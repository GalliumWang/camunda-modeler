{"version":3,"sources":["webpack:///./src/app/tabs/form/FormEditor.less?a2d6","webpack:///./src/app/tabs/form/FormEditor.less","webpack:///./src/app/tabs/json/JSONEditor.less?b353","webpack:///./src/app/tabs/json/JSONEditor.less","webpack:///./src/app/tabs/form/getFormEditMenu.js","webpack:///./src/app/tabs/form/FormEditor.js","webpack:///./src/app/tabs/json/JSONEditor.js","webpack:///./src/app/tabs/json/Menu.js","webpack:///./src/app/tabs/json/CodeMirror.js","webpack:///./src/app/tabs/form/FormTab.js","webpack:///./src/app/tabs/form/index.js"],"names":["content","module","i","options","transform","undefined","locals","exports","push","getCopyCutPasteEntries","state","inputActive","getDefaultCopyCutPasteEntries","getFormEditMenu","defaultUndoRedo","getDefaultUndoRedoEntries","getUndoRedoEntries","getSelectionEntries","DEFAULT_ENGINE_PROFILE","executionPlatform","ENGINES","PLATFORM","FormEditor","CachedComponent","constructor","props","super","onChanged","this","form","getCached","commandStack","get","isInputActive","newState","dirty","isDirty","redo","canRedo","removeSelected","save","selectAll","undo","canUndo","isFunction","editMenu","setState","engineProfile","setCached","err","executionPlatformVersion","contents","getSchema","onAction","ref","createRef","importing","EngineProfileHelper","schema","getEngineProfileFromForm","set","root","_state","editFormField","handleLintingDebounced","debounce","handleLinting","bind","componentDidMount","_isMounted","listen","current","attachTo","checkImport","componentWillUnmount","detach","componentDidUpdate","prevProps","cachedState","isCacheStateChanged","handleChanged","isImportNeeded","xml","importSchema","prevSchema","lastSchema","error","warnings","schemaJSON","JSON","parse","handleImport","stackIdx","_stackIdx","onImport","fn","forEach","event","on","off","getXML","stringify","saveSchema","triggerAction","action","context","editorActions","trigger","isRegistered","render","layout","linting","onLayoutChanged","className","css","hidden","onFocus","EngineProfile","onChange","Panel","LintingTab","Linting","name","version","Metadata","Form","exporter","type","payload","__destroy","destroy","WithCache","WithCachedState","JSONEditor","editor","history","doc","historySize","label","accelerator","role","canExport","windowMenu","React","isValueChange","isChachedStateChange","execCommand","lastXML","importXML","refresh","json","getValue","el","instance","CodeMirror","_el","autoCloseTags","dragDrop","allowDropFileTypes","lineWrapping","lineNumbers","mode","tabSize","parentNode","appendChild","removeChild","setValue","clearHistory","Object","defineProperty","previousValue","value","trim","string","isString","FormTab","createTab","defaultName","isFallback"],"mappings":"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","file":"6.6.js","sourcesContent":["\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./FormEditor.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./FormEditor.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./FormEditor.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".n4ouuFKRR0Cst6UWuYgf {\\n  display: flex;\\n  flex: 1;\\n  flex-direction: column;\\n}\\n.n4ouuFKRR0Cst6UWuYgf .form {\\n  display: flex;\\n  flex: 1;\\n  flex-direction: row;\\n}\\n.n4ouuFKRR0Cst6UWuYgf .form .fjs-container {\\n  --font-family: inherit;\\n  display: flex;\\n  flex: 1;\\n  flex-direction: row;\\n}\\n.n4ouuFKRR0Cst6UWuYgf .form .fjs-editor-container .fjs-form,\\n.n4ouuFKRR0Cst6UWuYgf .form .fjs-editor-container .fjs-palette,\\n.n4ouuFKRR0Cst6UWuYgf .form .fjs-editor-container .fjs-properties-panel {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow-y: auto;\\n}\\n.n4ouuFKRR0Cst6UWuYgf .form .fjs-powered-by {\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"FormEditor\": \"n4ouuFKRR0Cst6UWuYgf\"\n};","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./JSONEditor.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./JSONEditor.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/less-loader/dist/cjs.js!./JSONEditor.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"._3CZho0zRJdxdg8qDAb9d8d {\\n  display: flex;\\n  flex: 1;\\n  flex-direction: row;\\n  overflow: auto;\\n}\\n._3CZho0zRJdxdg8qDAb9d8d .content {\\n  flex: 1;\\n  position: relative;\\n}\\n._3CZho0zRJdxdg8qDAb9d8d .CodeMirror {\\n  height: 100%;\\n  font-size: 13px;\\n  font-family: var(--font-family-monospace);\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"JSONEditor\": \"_3CZho0zRJdxdg8qDAb9d8d\"\n};","/**\r\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\r\n * under one or more contributor license agreements. See the NOTICE file\r\n * distributed with this work for additional information regarding copyright\r\n * ownership.\r\n *\r\n * Camunda licenses this file to you under the MIT; you may not use this file\r\n * except in compliance with the MIT License.\r\n */\r\n\r\nimport {\r\n  getDefaultCopyCutPasteEntries,\r\n  getDefaultUndoRedoEntries,\r\n  getSelectionEntries,\r\n  getUndoRedoEntries\r\n} from '../getEditMenu';\r\n\r\nfunction getCopyCutPasteEntries(state) {\r\n  const { inputActive } = state;\r\n\r\n  return getDefaultCopyCutPasteEntries(inputActive);\r\n}\r\n\r\nexport function getFormEditMenu(state) {\r\n  const { defaultUndoRedo } = state;\r\n\r\n  const undoRedoEntries = defaultUndoRedo\r\n    ? getDefaultUndoRedoEntries(true)\r\n    : getUndoRedoEntries(state);\r\n\r\n  return [\r\n    undoRedoEntries,\r\n    getCopyCutPasteEntries(state),\r\n    getSelectionEntries(state)\r\n  ];\r\n}\r\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport React, { createRef, Fragment } from 'react';\n\nimport { isFunction } from 'min-dash';\n\nimport debounce from '../../../util/debounce';\n\nimport {\n  WithCache,\n  WithCachedState,\n  CachedComponent\n} from '../../cached';\n\nimport { Loader } from '../../primitives';\n\nimport css from './FormEditor.less';\n\nimport { getFormEditMenu } from './getFormEditMenu';\n\nimport { active as isInputActive } from '../../../util/dom/isInput';\n\nimport { FormEditor as Form } from './editor/FormEditor';\n\nimport Metadata from '../../../util/Metadata';\n\nimport {\n  EngineProfile,\n  getEngineProfileFromForm\n} from '../EngineProfile';\n\nimport EngineProfileHelper from '../EngineProfileHelper';\n\nimport { ENGINES } from '../../../util/Engines';\n\nimport { Linting } from '../Linting';\n\nimport Panel from '../panel/Panel';\n\nimport LintingTab from '../panel/tabs/LintingTab';\n\nconst LOW_PRIORITY = 500;\n\nexport const DEFAULT_ENGINE_PROFILE = {\n  executionPlatform: ENGINES.PLATFORM\n};\n\n\nexport class FormEditor extends CachedComponent {\n  constructor(props) {\n    super(props);\n\n    this.ref = createRef();\n\n    this.state = {\n      importing: false\n    };\n\n    this.engineProfile = new EngineProfileHelper({\n      get: () => {\n        const { form } = this.getCached();\n\n        const schema = form.getSchema();\n\n        return getEngineProfileFromForm(schema, DEFAULT_ENGINE_PROFILE);\n      },\n      set: (engineProfile) => {\n        const { form } = this.getCached();\n\n        const root = form._state.schema;\n\n        const modeling = form.get('modeling');\n\n        modeling.editFormField(root, engineProfile);\n      },\n      getCached: () => this.getCached(),\n      setCached: (state) => this.setCached(state)\n    });\n\n    this.handleLintingDebounced = debounce(this.handleLinting.bind(this));\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    let { form } = this.getCached();\n\n    this.listen('on');\n\n    if (this.ref.current) {\n      form.attachTo(this.ref.current);\n    }\n\n    this.checkImport();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n\n    const { form } = this.getCached();\n\n    form.detach();\n\n    this.listen('off');\n  }\n\n  componentDidUpdate(prevProps) {\n    this.checkImport(prevProps);\n\n    if (isCacheStateChanged(prevProps, this.props)) {\n      this.handleChanged();\n    }\n  }\n\n  checkImport(prevProps) {\n    if (!this.isImportNeeded(prevProps)) {\n      return;\n    }\n\n    const { xml: schema } = this.props;\n\n    this.importSchema(schema);\n  }\n\n  isImportNeeded(prevProps = {}) {\n    const { importing } = this.state;\n\n    if (importing) {\n      return false;\n    }\n\n    const { xml: schema } = this.props;\n\n    const { xml: prevSchema } = prevProps;\n\n    if (schema === prevSchema) {\n      return false;\n    }\n\n    const { lastSchema } = this.getCached();\n\n    return schema !== lastSchema;\n  }\n\n  async importSchema(schema) {\n    this.setState({\n      importing: true\n    });\n\n    const { form } = this.getCached();\n\n    let error = null,\n        warnings = null;\n\n    try {\n      const schemaJSON = JSON.parse(schema);\n\n      ({ error, warnings } = await form.importSchema(schemaJSON));\n    } catch (err) {\n      error = err;\n\n      if (err.warnings) {\n        warnings = err.warnings;\n      }\n    }\n\n    if (this._isMounted) {\n      this.handleImport(error, warnings);\n    }\n  }\n\n  handleImport(error, warnings) {\n    const { form } = this.getCached();\n\n    const commandStack = form.get('commandStack');\n\n    const stackIdx = commandStack._stackIdx;\n\n    const {\n      onImport,\n      xml: schema\n    } = this.props;\n\n    let engineProfile = null;\n\n    try {\n      engineProfile = this.engineProfile.get(true);\n    } catch (err) {\n      error = err;\n    }\n\n    if (error) {\n      this.setCached({\n        engineProfile: null,\n        lastSchema: null\n      });\n    } else {\n      this.setCached({\n        engineProfile,\n        lastSchema: schema,\n        stackIdx\n      });\n\n      this.handleLinting();\n    }\n\n    this.setState({\n      importing: false\n    });\n\n    onImport(error, warnings);\n  }\n\n  listen(fn) {\n    const { form } = this.getCached();\n\n    [\n      'attach',\n      'commandStack.changed',\n      'import.done',\n      'propertiesPanel.focusin',\n      'propertiesPanel.focusout',\n      'selection.changed'\n    ].forEach((event) => form[ fn ](event, this.handleChanged));\n\n    if (fn === 'on') {\n      form.on('commandStack.changed', LOW_PRIORITY, this.handleLintingDebounced);\n    } else if (fn === 'off') {\n      form.off('commandStack.changed', this.handleLintingDebounced);\n    }\n  }\n\n  handleChanged = () => {\n    const { onChanged } = this.props;\n\n    const { form } = this.getCached();\n\n    const commandStack = form.get('commandStack');\n\n    const inputActive = isInputActive();\n\n    const newState = {\n      defaultUndoRedo: inputActive,\n      dirty: this.isDirty(),\n      inputActive,\n      redo: commandStack.canRedo(),\n      removeSelected: inputActive,\n      save: true,\n      selectAll: true,\n      undo: commandStack.canUndo()\n    };\n\n    if (isFunction(onChanged)) {\n      onChanged({\n        ...newState,\n        editMenu: getFormEditMenu(newState)\n      });\n    }\n\n    this.setState(newState);\n\n    try {\n      const engineProfile = this.engineProfile.get();\n\n      this.engineProfile.setCached(engineProfile);\n    } catch (err) {\n\n      // TODO\n    }\n  }\n\n  handleLinting = () => {\n    const engineProfile = this.engineProfile.getCached();\n\n    const { form } = this.getCached();\n\n    if (!engineProfile || !engineProfile.executionPlatformVersion) {\n      return;\n    }\n\n    const contents = form.getSchema();\n\n    const { onAction } = this.props;\n\n    onAction('lint-tab', { contents });\n  }\n\n  isDirty() {\n    const {\n      form,\n      stackIdx\n    } = this.getCached();\n\n    const commandStack = form.get('commandStack');\n\n    return commandStack._stackIdx !== stackIdx;\n  }\n\n  getXML() {\n    const {\n      form,\n      lastSchema\n    } = this.getCached();\n\n    const commandStack = form.get('commandStack');\n\n    const stackIdx = commandStack._stackIdx;\n\n    if (!this.isDirty()) {\n      return lastSchema || this.props.xml;\n    }\n\n    const schema = JSON.stringify(form.saveSchema(), null, 2);\n\n    this.setCached({\n      lastSchema: schema,\n      stackIdx\n    });\n\n    return schema;\n  }\n\n  triggerAction(action, context) {\n    const { form } = this.getCached();\n\n    const editorActions = form.get('editorActions');\n\n    if (action === 'selectElement') {\n      editorActions.trigger('selectFormField', context);\n    }\n\n    if (editorActions.isRegistered(action)) {\n      return editorActions.trigger(action, context);\n    }\n  }\n\n  render() {\n    const engineProfile = this.engineProfile.getCached();\n\n    const {\n      layout,\n      linting = [],\n      onAction,\n      onLayoutChanged\n    } = this.props;\n\n    const { importing } = this.state;\n\n    return (\n      <div className={ css.FormEditor }>\n        <Loader hidden={ !importing } />\n\n        <div\n          className=\"form\"\n          onFocus={ this.handleChanged }\n          ref={ this.ref }\n        ></div>\n\n        { engineProfile && <EngineProfile\n          engineProfile={ engineProfile }\n          onChange={ (engineProfile) => this.engineProfile.set(engineProfile) } /> }\n\n        {\n          engineProfile && <Fragment>\n            <Panel\n              layout={ layout }>\n              <LintingTab\n                layout={ layout }\n                linting={ linting }\n                onAction={ onAction }\n                onLayoutChanged={ onLayoutChanged } />\n            </Panel>\n            <Linting\n              layout={ layout }\n              linting={ linting }\n              onLayoutChanged={ onLayoutChanged } />\n          </Fragment>\n        }\n      </div>\n    );\n  }\n\n  static createCachedState(props) {\n\n    const {\n      onAction,\n    } = props;\n\n    const {\n      name,\n      version\n    } = Metadata;\n\n    const form = new Form({\n      exporter: {\n        name,\n        version\n      }\n    });\n\n    const commandStack = form.get('commandStack');\n\n    const stackIdx = commandStack._stackIdx;\n\n    onAction('emit-event', {\n      type: 'form.modeler.created',\n      payload: form\n    });\n\n    return {\n      __destroy: () => {\n        form.destroy();\n      },\n      engineProfile: null,\n      form,\n      lastSchema: null,\n      stackIdx\n    };\n  }\n}\n\nexport default WithCache(WithCachedState(FormEditor));\n\n// helpers //////////\n\nfunction isCacheStateChanged(prevProps, props) {\n  return prevProps.cachedState !== props.cachedState;\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport React from 'react';\n\nimport {\n  WithCache,\n  WithCachedState,\n  CachedComponent\n} from '../../cached';\n\nimport CodeMirror from './CodeMirror';\n\nimport css from './JSONEditor.less';\n\nimport {\n  getEditMenu,\n  getWindowMenu\n} from './Menu';\n\nimport {\n  isString\n} from 'min-dash';\n\n\nexport class JSONEditor extends CachedComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    const {\n      editor\n    } = this.getCached();\n\n    editor.attachTo(this.ref.current);\n\n    editor.on('change', this.handleChanged);\n\n    this.handleChanged();\n\n    this.checkImport();\n  }\n\n  componentWillUnmount() {\n    const {\n      editor\n    } = this.getCached();\n\n    editor.detach();\n\n    editor.off('change', this.handleChanged);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (isValueChange(prevProps.xml, this.props.xml)) {\n      this.checkImport();\n    }\n\n    if (isChachedStateChange(prevProps, this.props)) {\n      this.handleChanged();\n    }\n  }\n\n  triggerAction(action) {\n    const {\n      editor\n    } = this.getCached();\n\n    if (action === 'undo') {\n      editor.doc.undo();\n    }\n\n    if (action === 'redo') {\n      editor.doc.redo();\n    }\n\n    if (action === 'find') {\n      editor.execCommand('findPersistent');\n    }\n\n    if (action === 'findNext') {\n      editor.execCommand('findNext');\n    }\n\n    if (action === 'findPrev') {\n      editor.execCommand('findPrev');\n    }\n\n    if (action === 'replace') {\n      editor.execCommand('replace');\n    }\n  }\n\n  checkImport() {\n    const { xml } = this.props;\n\n    const {\n      editor,\n      lastXML\n    } = this.getCached();\n\n    if (isValueChange(lastXML, xml)) {\n      editor.importXML(xml);\n\n      const stackIdx = editor._stackIdx;\n\n      this.setCached({\n        lastXML: xml,\n        stackIdx\n      });\n    }\n\n    editor.refresh();\n  }\n\n  isDirty() {\n    const {\n      editor,\n      stackIdx\n    } = this.getCached();\n\n    return editor._stackIdx !== stackIdx;\n  }\n\n  handleChanged = () => {\n    const {\n      onChanged\n    } = this.props;\n\n    const {\n      editor\n    } = this.getCached();\n\n    const history = editor.doc.historySize();\n\n    const editMenu = getEditMenu({\n      canRedo: !!history.redo,\n      canUndo: !!history.undo\n    });\n\n    const dirty = this.isDirty();\n\n    const newState = {\n      canExport: false,\n      dirty,\n      redo: !!history.redo,\n      undo: !!history.undo\n    };\n\n    // ensure backwards compatibility\n    // https://github.com/camunda/camunda-modeler/commit/78357e3ed9e6e0255ac8225fbdf451a90457e8bf#diff-bd5be70c4e5eadf1a316c16085a72f0fL17\n    newState.editable = true;\n    newState.searchable = true;\n\n    const windowMenu = getWindowMenu();\n\n    if (typeof onChanged === 'function') {\n      onChanged({\n        ...newState,\n        editMenu,\n        windowMenu\n      });\n    }\n\n    this.setState({\n      ...newState\n    });\n  }\n\n  getXML() {\n    const {\n      editor\n    } = this.getCached();\n\n    const stackIdx = editor._stackIdx;\n\n    const json = editor.getValue();\n\n    this.setCached({\n      lastXML: json,\n      stackIdx\n    });\n\n    return json;\n  }\n\n  render() {\n    return (\n      <div className={ css.JSONEditor }>\n        <div className=\"content\" ref={ this.ref }></div>\n      </div>\n    );\n  }\n\n  static createCachedState() {\n\n    const editor = CodeMirror();\n\n    const stackIdx = editor._stackIdx;\n\n    return {\n      __destroy: () => {\n        editor.destroy();\n      },\n      editor,\n      lastXML: null,\n      stackIdx\n    };\n  }\n\n}\n\nexport default WithCache(WithCachedState(JSONEditor));\n\n// helpers //////////\n\nfunction isValueChange(previousValue, value) {\n  return trim(previousValue) !== trim(value);\n}\n\nfunction trim(string) {\n  if (isString(string)) {\n    return string.trim();\n  }\n\n  return string;\n}\n\nfunction isChachedStateChange(prevProps, props) {\n  return prevProps.cachedState !== props.cachedState;\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport {\n  getUndoRedoEntries\n} from '../getEditMenu';\n\nfunction getFindEntries() {\n  return [ {\n    label: 'Find',\n    accelerator: 'CommandOrControl+F',\n    action: 'find'\n  }, {\n    label: 'Find Next',\n    accelerator: 'Shift+CommandOrControl+N',\n    action: 'findNext'\n  }, {\n    label: 'Find Previous',\n    accelerator: 'Shift+CommandOrControl+P',\n    action: 'findPrev'\n  }, {\n    label: 'Replace',\n    accelerator: 'Shift+CommandOrControl+F',\n    action: 'replace'\n  } ];\n}\n\nfunction getCopyCutPasteEntries() {\n  return [\n    {\n      label: 'Cut',\n      accelerator: 'CmdOrCtrl+X',\n      role: 'cut'\n    },\n    {\n      label: 'Copy',\n      accelerator: 'CmdOrCtrl+C',\n      role: 'copy'\n    },\n    {\n      label: 'Paste',\n      accelerator: 'CmdOrCtrl+V',\n      role: 'paste'\n    }\n  ];\n}\n\nexport function getEditMenu(state) {\n  return [\n    getUndoRedoEntries(state),\n    getCopyCutPasteEntries(),\n    getFindEntries()\n  ];\n}\n\nexport function getWindowMenu() {\n  return [];\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport CodeMirror from 'codemirror';\n\n// javascript syntax highlighting (json is a subset)\nimport 'codemirror/mode/javascript/javascript';\n\n// auto close tags\nimport 'codemirror/addon/edit/closetag';\n\n// search addons\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\n\nimport 'codemirror/addon/dialog/dialog';\n\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/addon/dialog/dialog.css';\n\n\n/**\n * Create a code mirror instance with an editor API.\n *\n * @param  {Object} options\n * @return {CodeMirror}\n */\nexport default function create(options) {\n\n  var el = this;\n\n  var instance = CodeMirror(function(_el) {\n    el = _el;\n  }, {\n    autoCloseTags: true,\n    dragDrop: true,\n    allowDropFileTypes: [\n      'text/plain',\n      'application/json',\n      'application/camunda-form'\n    ],\n    lineWrapping: true,\n    lineNumbers: true,\n    mode: {\n      name: 'application/json',\n      json: true\n    },\n    tabSize: 2\n  });\n\n  instance.attachTo = function(parentNode) {\n    parentNode.appendChild(el);\n\n    this.refresh();\n  };\n\n  instance.detach = function() {\n    if (el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n  };\n\n  instance.importXML = function(json) {\n    this.setValue(json);\n\n    this.doc.clearHistory();\n  };\n\n  instance.destroy = function() { };\n\n  Object.defineProperty(instance, '_stackIdx', {\n    get() {\n      return this.doc.historySize().undo;\n    }\n  });\n\n  return instance;\n}\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nimport FormEditor from './FormEditor';\nimport JSONEditor from '../json';\n\nimport { createTab } from '../EditorTab';\n\n\nconst FormTab = createTab('FormTab', [\n  {\n    type: 'form',\n    editor: FormEditor,\n    defaultName: 'Form'\n  },\n  {\n    type: 'json',\n    editor: JSONEditor,\n    isFallback: true,\n    defaultName: 'JSON'\n  }\n]);\n\nexport default FormTab;\n","/**\n * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n * under one or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information regarding copyright\n * ownership.\n *\n * Camunda licenses this file to you under the MIT; you may not use this file\n * except in compliance with the MIT License.\n */\n\nexport { default } from './FormTab';\n"],"sourceRoot":""}